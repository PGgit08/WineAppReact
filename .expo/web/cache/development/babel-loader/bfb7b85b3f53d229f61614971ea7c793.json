{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _config = require(\"../config\");\n\nvar CheckResponse = function CheckResponse(res) {\n  return new Promise(function (resolve, reject) {\n    if (res.data.error == 1) {\n      console.log('error');\n      reject({\n        isError: true,\n        errorMsg: res.data.msg\n      });\n    }\n\n    if (res.data.error == 0 || !res.data.hasOwnProperty(\"error\")) {\n      resolve(res.data);\n    }\n\n    ;\n  });\n};\n\nvar login = function login(_ref) {\n  var username, password, res;\n  return _regenerator.default.async(function login$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          username = _ref.username, password = _ref.password;\n          _context.prev = 1;\n          _context.next = 4;\n          return _regenerator.default.awrap(_axios.default.get(_config.AUTH_ENDPOINTS.login, {\n            params: {\n              username: username,\n              password: password\n            }\n          }));\n\n        case 4:\n          res = _context.sent;\n          return _context.abrupt(\"return\", CheckResponse(res));\n\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](1);\n          console.log(_context.t0);\n\n        case 11:\n          ;\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[1, 8]], Promise);\n};\n\nvar register = function register(_ref2) {\n  var username, password, email, res;\n  return _regenerator.default.async(function register$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          username = _ref2.username, password = _ref2.password, email = _ref2.email;\n          _context2.prev = 1;\n          _context2.next = 4;\n          return _regenerator.default.awrap(_axios.default.get(_config.AUTH_ENDPOINTS.register, {\n            params: {\n              username: username,\n              password: password,\n              email: email\n            }\n          }));\n\n        case 4:\n          res = _context2.sent;\n          return _context2.abrupt(\"return\", CheckResponse(res));\n\n        case 8:\n          _context2.prev = 8;\n          _context2.t0 = _context2[\"catch\"](1);\n          console.log(_context2.t0);\n\n        case 11:\n          ;\n\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[1, 8]], Promise);\n};\n\nvar identify = function identify() {\n  var res1;\n  return _regenerator.default.async(function identify$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return _regenerator.default.awrap(_axios.default.get(_config.AUTH_ENDPOINTS.identify, {\n            headers: {\n              'Authorization': 'Bearer ' + jwt\n            }\n          }));\n\n        case 3:\n          res1 = _context3.sent;\n          CheckResponse(res1);\n          _context3.next = 10;\n          break;\n\n        case 7:\n          _context3.prev = 7;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.log(_context3.t0);\n\n        case 10:\n          ;\n\n        case 11:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, [[0, 7]], Promise);\n};\n\nvar _default = {\n  login: login,\n  register: register,\n  identify: identify\n};\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/peter/Peter-First-App/src/api_handling/auth_requests.js"],"names":["CheckResponse","res","Promise","resolve","reject","data","error","console","log","isError","errorMsg","msg","hasOwnProperty","login","username","password","axios","get","AUTH_ENDPOINTS","params","register","email","identify","headers","jwt","res1"],"mappings":";;;;;;;;;AAAA;;AAGA;;AAGA;;AAEA,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,CAACC,GAAD,EAAS;AAC3B,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,QAAGH,GAAG,CAACI,IAAJ,CAASC,KAAT,IAAkB,CAArB,EAAuB;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAJ,MAAAA,MAAM,CACF;AACIK,QAAAA,OAAO,EAAE,IADb;AAEIC,QAAAA,QAAQ,EAAET,GAAG,CAACI,IAAJ,CAASM;AAFvB,OADE,CAAN;AAMH;;AACD,QAAGV,GAAG,CAACI,IAAJ,CAASC,KAAT,IAAkB,CAAlB,IAAuB,CAACL,GAAG,CAACI,IAAJ,CAASO,cAAT,CAAwB,OAAxB,CAA3B,EAA4D;AAIxDT,MAAAA,OAAO,CAACF,GAAG,CAACI,IAAL,CAAP;AACH;;AAAA;AACJ,GAhBM,CAAP;AAiBH,CAlBD;;AAoBA,IAAMQ,KAAK,GAAG,SAARA,KAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAQC,UAAAA,QAAR,QAAQA,QAAR,EAAkBC,QAAlB,QAAkBA,QAAlB;AAAA;AAAA;AAAA,4CAIUC,eAAMC,GAAN,CAAUC,uBAAeL,KAAzB,EAAgC;AAACM,YAAAA,MAAM,EAAE;AAACL,cAAAA,QAAQ,EAARA,QAAD;AAAWC,cAAAA,QAAQ,EAARA;AAAX;AAAT,WAAhC,CAJV;;AAAA;AAIFd,UAAAA,GAJE;AAAA,2CAKCD,aAAa,CAACC,GAAD,CALd;;AAAA;AAAA;AAAA;AASNM,UAAAA,OAAO,CAACC,GAAR;;AATM;AAWT;;AAXS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAd;;AAeA,IAAMY,QAAQ,GAAG,SAAXA,QAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAQN,UAAAA,QAAR,SAAQA,QAAR,EAAkBC,QAAlB,SAAkBA,QAAlB,EAA4BM,KAA5B,SAA4BA,KAA5B;AAAA;AAAA;AAAA,4CAEOL,eAAMC,GAAN,CAAUC,uBAAeE,QAAzB,EAAmC;AAC/CD,YAAAA,MAAM,EAAE;AACJL,cAAAA,QAAQ,EAAEA,QADN;AAEJC,cAAAA,QAAQ,EAAEA,QAFN;AAGJM,cAAAA,KAAK,EAAEA;AAHH;AADuC,WAAnC,CAFP;;AAAA;AAELpB,UAAAA,GAFK;AAAA,4CASFD,aAAa,CAACC,GAAD,CATX;;AAAA;AAAA;AAAA;AAYTM,UAAAA,OAAO,CAACC,GAAR;;AAZS;AAaZ;;AAbY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAjB;;AAiBA,IAAMc,QAAQ,GAAG,SAAXA,QAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAEQN,eAAMC,GAAN,CAAUC,uBAAeI,QAAzB,EAAmC;AAChDC,YAAAA,OAAO,EAAE;AACL,+BAAiB,YAAYC;AADxB;AADuC,WAAnC,CAFR;;AAAA;AAELC,UAAAA,IAFK;AAOTzB,UAAAA,aAAa,CAACyB,IAAD,CAAb;AAPS;AAAA;;AAAA;AAAA;AAAA;AAUTlB,UAAAA,OAAO,CAACC,GAAR;;AAVS;AAWZ;;AAXY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAjB;;eAec;AACVK,EAAAA,KAAK,EAALA,KADU;AAEVO,EAAAA,QAAQ,EAARA,QAFU;AAGVE,EAAAA,QAAQ,EAARA;AAHU,C","sourcesContent":["import React from 'react';\r\n\r\n// api lib import\r\nimport axios from 'axios';\r\n\r\n// config urls\r\nimport { AUTH_ENDPOINTS } from '../config';\r\n\r\nconst CheckResponse = (res) => {\r\n    return new Promise((resolve, reject) => {\r\n        if(res.data.error == 1){\r\n            console.log('error')\r\n            reject(\r\n                {\r\n                    isError: true,\r\n                    errorMsg: res.data.msg\r\n                }\r\n            );\r\n        }\r\n        if(res.data.error == 0 || !res.data.hasOwnProperty(\"error\")){\r\n            // there will be no error\r\n            // in some cases, like login\r\n            // which just returns JWT\r\n            resolve(res.data);\r\n        };\r\n    });\r\n};\r\n\r\nconst login = async ({username, password}) => {\r\n    // promise for api\r\n    // catch use ErrorHandler\r\n    try{\r\n        let res = await axios.get(AUTH_ENDPOINTS.login, {params: {username, password}});\r\n        return CheckResponse(res);\r\n    }\r\n    catch(err){\r\n        // only occurs if axios error\r\n        console.log(err);\r\n        // return err;\r\n    };\r\n\r\n};\r\n\r\nconst register = async ({username, password, email}) => {\r\n    try{\r\n        let res = await axios.get(AUTH_ENDPOINTS.register, {\r\n            params: {\r\n                username: username, \r\n                password: password,\r\n                email: email\r\n            }\r\n        });\r\n        return CheckResponse(res);\r\n    }\r\n    catch(err){\r\n        console.log(err);\r\n    };\r\n\r\n};\r\n\r\nconst identify = async () => {\r\n    try{\r\n        let res1 = await axios.get(AUTH_ENDPOINTS.identify, {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + jwt\r\n            }\r\n        });\r\n        CheckResponse(res1);\r\n    }\r\n    catch(err){\r\n        console.log(err);\r\n    };\r\n};\r\n\r\n\r\nexport default{\r\n    login, \r\n    register,\r\n    identify\r\n};"]},"metadata":{},"sourceType":"script"}